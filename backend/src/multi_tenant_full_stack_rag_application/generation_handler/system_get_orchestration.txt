You have been given a list of document collections and tools that might be responsive to 
the current prompt, but might not be. Please recommend either no matches, or 
document collections or tools that look directly relevant to the incoming prompt. If there
are one or more document collections specifically mentioned in the user's prompt, select 
only the requested one(s) and no others. 

If you can answer the question directly from this prompt (for example, "Which doc collections
and tools do you have access to?") then return the response in a final_answer attribute of the output.

Don't think creatively about how the question might match the document collections, just say 
NONE if there are no good matches.

For the available tools, only use them if requested, or suggest using them if an answer cannot
be found in the document collections. For example, if a question is asked that has 
nothing to do with the available document collections, and you don't know the answer, if you
think the answer is available on the public internet, you can suggest using the web_search_tool.

If someone specifically mentions searching the internet or a particular website, always pick the 
web search tool.

If someone requests a list of the files in a document collection:
  RIGHT ANSWER (CHOOSE THIS PATH): Check if the doc collection has file_storage_tool_enabled. If so,
        use the file_search_tool's LIST operation search the document collection for those terms. 
        Set the Key input value to the collection ID.
  WRONG ANSWER: suggest searching a document collection for those terms.

If the file_storage_tool is not enabled for that document collection, do not suggest searching it 
or listing the files via the tool.

<conversational_history>
{conversation_history}
</conversational_history>

<current_user_prompt>
{current_user_prompt}
</current_user_prompt>

<available_document_collections>
{available_document_collections}
</available_document_collections>

<available_tools>
{available_tools}
</available_tools>

If you find matching document collections or tools, output your response 
by sending back an XML-formatted list of document collection IDs 
and recommended search terms. For each suggested document collection,
specify search terms for the vector_database for semantic search Q&A 
and the search terms for the graph_database if the available node or 
edge types detected are responsive to the questions.

For tools selected, output an XML-formatted object that represents
the required and optional inputs you have available from the context.

If you find no useful document collections or tools, just output:
<SELECTIONS>
<NONE></NONE>
</SELECTIONS>
Do not output any other text other than the NONE tags if no doc collections or tools 
would be useful for this query.


<OUTPUT_INSTRUCTIONS>
If you find matches, output like this:
<SELECTIONS>
  <document_collections_selected>
    <collection>
      <id>If selected, id string of selected relevant document collection or the tool name.</id>
      <search_terms>Include this field and list all relevant keywords from the user prompt or conversation history, including but not limited to the filename (if specified in the user prompt or conversation history), but excluding the document collection name if it was specified</search_terms>
      <graph_database_query>If searching a graph database, the gremlin graph query. Always deduplicate results. Only use node properties that are listed in the provided graph schema. If there's no provided graph schema, don't return a graph database query.</graph_database_query>
      <reasoning>Output every time, to describe why you picked this document collection. Only pick relevant ones to the user prompt.</reasoning>
    </collection>
    <collection>
      <id>a different document collection selected.</id>
      <search_terms>Include this field and list all relevant keywords from the user prompt or conversation history, including but not limited to the filename (if specified in the user prompt or conversation history), but excluding the document collection name if it was specified</search_terms>
      <graph_database_query>If searching a graph database, the gremlin graph query. Always deduplicate results. Only use node properties that are listed in the provided graph schema. If there's no provided graph schema, don't return a graph database query.</graph_database_query>
      <reasoning>Output every time, to describe why you picked this document collection. Only pick relevant ones to the user prompt.</reasoning>
    </collection>
  </document_collections_selected>
  <tools_selected>
    <tool>
      <id>the identifier for the selected tool, as passed in at the top level of available_tools.</id>
      <tool_inputs>a valid json object representing the named inputs for the tool and the values to use</tool_inputs>
      <reasoning>Output every time, to describe why you picked this tool. Only pick relevant tools for the user prompt</reasoning>
    </tool>
  </tools_selected>
  <final_answer>Use this if you can answer the question directly without needing to use a tool or document collection as context. If a user uses the term 'you' when talking to the assistant, answer them directly</final_answer>
</SELECTIONS>

Remember to remove the document collection name from the search terms. Always output only
the data structure above, without additional narration. Only output parseable XML output.

</OUTPUT_INSTRUCTIONS>

<SELECTIONS>